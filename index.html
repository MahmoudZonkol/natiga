<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>بوابة النتائج الفاخرة</title>
    <meta name="description" content="استعلم عن نتيجتك، واكتشف ترتيبك على مستوى المدرسة، وتعرف على الكليات المتوقعة لك.">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    <!-- Chart.js for Radar Chart -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- html2canvas for downloading result as image -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- canvas-confetti for celebration -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root{--primary-color:#367BF5;--secondary-color:#42D6A4;--success-color:#28a745;--fail-color:#d93025;--bg-light:#f0f4f9;--bg-dark:#0d1117;--card-bg-light:rgba(255,255,255,0.7);--card-bg-dark:rgba(22,27,34,0.7);--text-light:#1f2937;--text-dark:#f0f6fc;--border-light:rgba(209,213,219,0.5);--border-dark:rgba(48,54,61,0.5);--shadow:0 25px 50px -12px rgba(0,0,0,0.25)}@keyframes gradient-animation{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}body{font-family:'Cairo',sans-serif;background:var(--bg-light);color:var(--text-light);transition:background-color .5s,color .5s;overflow-x:hidden;display:flex;justify-content:center;align-items:flex-start;min-height:100vh}.background-shapes{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;background:linear-gradient(45deg, #e0f7fa, #b2ebf2, #80deea, #4dd0e1);background-size:400% 400%;animation:gradient-animation 15s ease infinite}body.dark-mode{--bg-light:#0d1117;--text-light:#f0f6fc}.dark-mode .background-shapes{background:linear-gradient(45deg, #0d47a1, #1e88e5, #42a5f5, #90caf9);background-size:400% 400%;animation:gradient-animation 20s ease infinite}.theme-switcher{position:fixed;top:20px;left:20px;background:var(--card-bg-light);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid var(--border-light);width:50px;height:50px;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer;font-size:22px;z-index:1000;box-shadow:var(--shadow);transition:all .3s ease}body.dark-mode .theme-switcher{background:var(--card-bg-dark);border-color:var(--border-dark)}.progress-bar{position:fixed;top:0;left:0;right:0;height:5px;background:linear-gradient(90deg, var(--primary-color), var(--secondary-color));width:0;opacity:0;transition:opacity .3s,width .5s;z-index:9999}.progress-bar.visible{opacity:1}.main-container{width:100%;max-width:750px;padding:20px;padding-top:80px;box-sizing:border-box;display:flex;flex-direction:column;align-items:center}.search-container,.result-area{width:100%;opacity:0;transform:translateY(30px);animation:fadeInUp .6s .2s ease-out forwards}@keyframes fadeInUp{to{opacity:1;transform:translateY(0)}}.search-container{background:var(--card-bg-light);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid var(--border-light);padding:40px;border-radius:20px;box-shadow:var(--shadow);text-align:center;transition:all .5s ease-in-out}.header i{font-size:60px;color:transparent;background:linear-gradient(45deg, var(--primary-color), var(--secondary-color));-webkit-background-clip:text;background-clip:text}.header h1{margin:10px 0 5px 0;font-size:2.5rem;font-weight:900}.header p{color:#6c757d;margin-bottom:30px;font-size:1.1rem}body.dark-mode .header p{color:#9ca3af}input[type=number]{width:100%;padding:16px;margin-bottom:20px;border:2px solid transparent;background:rgba(230,230,230,0.5);border-radius:12px;box-sizing:border-box;text-align:center;font-size:2.5rem;font-weight:700;transition:all .3s}body.dark-mode input{background:rgba(0,0,0,0.2);color:white}input[type=number]:focus{border-color:var(--primary-color);box-shadow:0 0 0 4px rgba(54,123,245,.3);outline:none}.search-btn{background:linear-gradient(45deg, var(--primary-color), var(--secondary-color));color:white;padding:16px;border:none;border-radius:12px;cursor:pointer;font-size:1.3rem;font-weight:700;transition:all .3s ease;width:100%;display:flex;justify-content:center;align-items:center;gap:10px;box-shadow:0 10px 20px -5px rgba(54,123,245,.5)}.search-btn:hover{transform:translateY(-4px);box-shadow:0 15px 25px -5px rgba(54,123,245,.6)}.search-btn:disabled{background:#9ca3af;box-shadow:none;transform:none;cursor:not-allowed}.search-history{margin-top:20px;text-align:center}.search-history h3{font-size:1rem;color:#6c757d;margin-bottom:10px}body.dark-mode .search-history h3{color:#9ca3af}.history-tags{display:flex;flex-wrap:wrap;justify-content:center;gap:10px}.history-tag{background:rgba(0,0,0,0.05);padding:8px 15px;border-radius:50px;cursor:pointer;transition:all .2s ease}.history-tag:hover{background:rgba(0,0,0,0.1);transform:scale(1.05)}body.dark-mode .history-tag{background:rgba(255,255,255,0.1)}.body.dark-mode .history-tag:hover{background:rgba(255,255,255,0.2)}.result-area{display:none}.card{width:100%;background:var(--card-bg-light);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid var(--border-light);margin-bottom:30px;border-radius:20px;box-shadow:var(--shadow);overflow:hidden;opacity:0;transform:translateY(30px);animation:fadeInUp .5s ease-out forwards}body.dark-mode .card{background:var(--card-bg-dark);border-color:var(--border-dark)}.card-header{color:white;padding:20px 25px;display:flex;align-items:center;justify-content:space-between}.card-header h2{margin:0;font-size:1.5rem;font-weight:700}.card-header .action-icon{background:rgba(255,255,255,0.15);border:none;color:white;width:40px;height:40px;border-radius:50%;cursor:pointer;display:flex;justify-content:center;align-items:center;transition:background .2s ease}.card-header .action-icon:hover{background:rgba(255,255,255,0.3)}.card-header.result{background:linear-gradient(45deg, #1e3c72, #2a5298)}.card-header.analysis{background:linear-gradient(45deg, #004e92, #000428)}.card-header.subjects{background:linear-gradient(45deg, #c33764, #1d2671)}.card-header.chart{background:linear-gradient(45deg, #4776e6, #8e54e9)}.card-header.colleges{background:linear-gradient(45deg, #16a085, #f4d03f)}.card-body{padding:30px}.analysis-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px}.analysis-item{text-align:center}.analysis-item strong{display:block;margin-bottom:8px;font-size:1rem;color:#6c757d}.analysis-item span{font-size:2.5rem;font-weight:900}.subjects-table{width:100%;border-collapse:collapse;text-align:center}.subjects-table th, .subjects-table td{padding:15px;border-bottom:1px solid var(--border-light);font-weight:700;font-size:1.1rem}.subjects-table th{font-weight:900;color:var(--primary-color)}body.dark-mode .subjects-table th{color:var(--secondary-color)}.subjects-table tr:last-child td{border:none}.subjects-table td.above-avg{color:var(--success-color)}.subjects-table td.below-avg{color:var(--fail-color)}#colleges-list{list-style:none;padding:0;margin:0;max-height:350px;overflow-y:auto}#colleges-list li{padding:15px 25px;border-bottom:1px solid var(--border-light);font-weight:700;display:flex;align-items:center;gap:15px;font-size:1.1rem;transition:background-color .2s ease}#colleges-list li:hover{background-color:rgba(0,0,0,0.03)}#colleges-list li::before{content:'\f19d';font-family:'Font Awesome 6 Free';font-weight:900;color:var(--secondary-color)}body.dark-mode #colleges-list li:hover{background-color:rgba(255,255,255,0.05)}.actions-footer{text-align:center}.new-search-btn{background-color:#6c757d;color:white;padding:15px 35px;border:none;border-radius:12px;cursor:pointer;font-size:1.1rem;font-weight:700;transition:all .3s ease;box-shadow:0 4px 15px rgba(108,117,125,.3)}.new-search-btn:hover{background-color:#5a6268;transform:translateY(-3px);box-shadow:0 7px 20px rgba(108,117,125,.4)}.alert{position:fixed;bottom:20px;left:50%;background:linear-gradient(45deg, #d32f2f, #f44336);color:white;padding:15px 25px;border-radius:12px;box-shadow:var(--shadow);z-index:10000;display:flex;align-items:center;gap:15px;opacity:0;transition:all .5s ease;transform:translate(-50%,120%)}.alert.show{opacity:1;transform:translate(-50%,0)}.alert .close-btn{background:none;border:none;color:white;font-size:22px;cursor:pointer;opacity:.7;transition:opacity .2s}.alert .close-btn:hover{opacity:1}#printable-area{display:none}
    </style>
</head>
<body>
    <div class="background-shapes"></div>
    <div class="progress-bar" id="progress-bar"></div>
    <div class="theme-switcher" id="theme-switcher" title="تبديل الوضع"><i class="fas fa-moon"></i></div>
    <div class="alert" id="alert-box"><i class="fas fa-exclamation-circle"></i> <span id="alert-message"></span><button class="close-btn" onclick="hideAlert()">×</button></div>

    <main class="main-container">
        <section class="search-container" id="search-box">
            <div class="header">
                <i class="fas fa-user-graduate"></i>
                <h1>نتيجة الثانوية العامة</h1>
                <p>استعلم عن نتيجتك، واكتشف ترتيبك، وتعرف على مستقبلك الأكاديمي</p>
            </div>
            <input type="number" id="seating-no-input" placeholder="ادخل رقم الجلوس هنا" autofocus>
            <button class="search-btn" id="search-btn" onclick="searchResult()">
                <i class="fas fa-search"></i>
                <span>عرض النتيجة</span>
            </button>
            <div class="search-history" id="search-history"></div>
        </section>
        <section class="result-area" id="result-area">
            <!-- النتائج والتحليلات ستظهر هنا ديناميكياً -->
        </section>
    </main>
    
    <div id="printable-area"></div>
    <!-- The crucial link to your JavaScript file -->
    <script src="script.js"></script>
</body>
</html>